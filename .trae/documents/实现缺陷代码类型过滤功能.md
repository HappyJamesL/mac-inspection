# 实现缺陷代码类型过滤功能（修改版）

## 目标
在左侧缺陷code列表的"DefectCode"文字右侧，增加codetype过滤按钮，即"点缺"、"线缺"、"曲线"、"面缺"四个按钮，点击DefectCode文字显示全部，点击对应按钮过滤下面code列表数据。

## 实现步骤

### 1. 添加过滤状态变量
在script setup部分添加一个ref变量，用于存储当前选择的过滤类型：
```javascript
const currentFilterType = ref('all'); // 默认显示所有类型
```

### 2. 创建过滤按钮组
在模板中，找到"Defect Code"标题所在的div（第189-191行），将标题改为可点击，并在右侧添加四个过滤按钮：
```vue
<div class="p-2 border-b bg-white flex justify-between items-center">
  <h3 
    class="font-bold text-gray-700 text-xs cursor-pointer hover:text-blue-600 transition-colors"
    @click="currentFilterType = 'all'"
  >
    Defect Code
  </h3>
  <div class="flex space-x-1">
    <button 
      v-for="filter in filterOptions" 
      :key="filter.value"
      @click="currentFilterType = filter.value"
      :class="['text-[10px] px-1.5 py-0.5 rounded font-mono', 
        currentFilterType === filter.value ? 'bg-blue-600 text-white' : 
        filter.value === 'point' ? 'text-blue-600 bg-blue-100' : 
        filter.value === 'line' ? 'text-green-600 bg-green-100' : 
        filter.value === 'curve' ? 'text-yellow-600 bg-yellow-100' : 
        'text-gray-600 bg-gray-100']"
    >
      {{ filter.label }}
    </button>
  </div>
</div>
```

### 3. 修改过滤选项配置
在script setup部分修改过滤选项配置，移除ALL选项：
```javascript
const filterOptions = [
  { label: '点缺', value: 'point' },
  { label: '线缺', value: 'line' },
  { label: '曲线', value: 'curve' },
  { label: '面缺', value: 'region' }
];
```

### 4. 创建过滤后的缺陷代码计算属性
添加一个计算属性，根据当前过滤类型过滤缺陷代码：
```javascript
const filteredDefectCodes = computed(() => {
  if (currentFilterType.value === 'all') {
    return defectCodes.value;
  } else if (currentFilterType.value === 'point') {
    return defectCodes.value.filter(code => code.type === 'point' && !code.needSymmetry);
  } else if (currentFilterType.value === 'region') {
    return defectCodes.value.filter(code => code.type === 'region' || code.type === 'area');
  } else {
    return defectCodes.value.filter(code => code.type === currentFilterType.value);
  }
});
```

### 5. 更新缺陷代码渲染列表
将模板中渲染缺陷代码的v-for从`defectCodes`改为`filteredDefectCodes`：
```vue
<button
  v-for="code in filteredDefectCodes"
  :key="code.id"
  @click="switchCode(code)"
  :class="['w-full py-3 px-3 rounded flex items-center text-xs font-bold border transition-all',
    selectedCode?.id === code.id 
      ? 'border-blue-500 bg-white shadow-md ring-1 ring-blue-500 text-blue-700 transform scale-[1.02]' 
      : 'border-transparent bg-white text-gray-600 hover:bg-gray-100',
    'cursor-pointer']"
>
  <!-- 按钮内容保持不变 -->
</button>
```

## 预期效果
1. "Defect Code"文字变为可点击，点击后显示所有缺陷代码
2. 在标题右侧显示四个过滤按钮（点缺、线缺、曲线、面缺）
3. 按钮样式与列表中缺陷类型标签样式一致
4. 点击不同按钮时，下方的缺陷代码列表会根据类型过滤
5. 点击"Defect Code"文字时显示所有缺陷代码
6. 按钮状态会根据当前过滤类型高亮显示

## 注意事项
1. 确保过滤逻辑与现有代码中类型映射保持一致
2. 按钮样式要与现有UI风格统一
3. 确保过滤后列表的排序保持不变
4. 确保选中的缺陷代码在过滤后仍能正确显示